(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{245:function(e,t,n){var content=n(291);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(39).default)("fe44b052",content,!0,{sourceMap:!1})},290:function(e,t,n){"use strict";var r=n(245);n.n(r).a},291:function(e,t,n){(t=n(38)(!1)).push([e.i,".mention{background:rgba(0,0,0,.1);font-size:.8rem;font-weight:700;border-radius:5px;padding:.2rem .5rem;white-space:nowrap}.mention,.mention-suggestion{color:rgba(0,0,0,.6)}.suggestion-list{padding:.2rem;border:2px solid rgba(0,0,0,.1);font-size:.8rem;font-weight:700}.suggestion-list__no-results{padding:.2rem .5rem}.suggestion-list__item{border-radius:5px;padding:.2rem .5rem;margin-bottom:.2rem;cursor:pointer}.suggestion-list__item:last-child{margin-bottom:0}.suggestion-list__item.is-selected,.suggestion-list__item:hover{background-color:hsla(0,0%,100%,.2)}.suggestion-list__item.is-empty{opacity:.5}.tippy-tooltip.dark-theme{background-color:#000;padding:0;font-size:1rem;text-align:inherit;color:#fff;border-radius:5px}.tippy-tooltip.dark-theme .tippy-backdrop{display:none}.tippy-tooltip.dark-theme .tippy-roundarrow{fill:#000}.tippy-popper[x-placement^=top] .tippy-tooltip.dark-theme .tippy-arrow{border-top-color:#000}.tippy-popper[x-placement^=bottom] .tippy-tooltip.dark-theme .tippy-arrow{border-bottom-color:#000}.tippy-popper[x-placement^=left] .tippy-tooltip.dark-theme .tippy-arrow{border-left-color:#000}.tippy-popper[x-placement^=right] .tippy-tooltip.dark-theme .tippy-arrow{border-right-color:#000}",""]),e.exports=t},325:function(e,t,n){"use strict";n(6),n(4),n(2),n(1),n(5);var r=n(0),o=n(48),c=(n(19),n(106),n(330)),l=n.n(c),d=n(331),f=n(328),h=n(397),v={name:"TiptapEditor",components:{EditorContent:f.b},props:["value","editorAutofocus"],data:function(){return{editor:null,emitAfterOnUpdate:!1,query:null,suggestionRange:null,filteredUsers:[],navigatedUserIndex:0,insertMention:function(){},observer:null}},mounted:function(){var e=this;this.editor=new f.a({onUpdate:function(t){var n=t.getHTML;e.emitAfterOnUpdate=!0,e.$emit("input",n())},content:this.value||"<ul><li></li></ul>",extensions:[new h.a,new h.e,new h.f,new h.g({levels:[1,2,3]}),new h.c,new h.m,new h.k,new h.o,new h.p,new h.b,new h.d,new h.i,new h.j,new h.n,new h.q,new h.h,new h.l({items:function(){return[{id:1,name:"Philipp KÃ¼hn"},{id:2,name:"Hans Pagel"},{id:3,name:"Kris Siepert"},{id:4,name:"Justin Schueler"}]},onEnter:function(t){var n=t.items,r=t.query,o=t.range,c=t.command,l=t.virtualNode;e.query=r,e.filteredUsers=n,e.suggestionRange=o,e.renderPopup(l),e.insertMention=c},onChange:function(t){var n=t.items,r=t.query,o=t.range,c=t.virtualNode;e.query=r,e.filteredUsers=n,e.suggestionRange=o,e.navigatedUserIndex=0,e.renderPopup(c)},onExit:function(){e.query=null,e.filteredUsers=[],e.suggestionRange=null,e.navigatedUserIndex=0,e.destroyPopup()},onKeyDown:function(t){var n=t.event;return 38===n.keyCode?(e.upHandler(),!0):40===n.keyCode?(e.downHandler(),!0):13===n.keyCode&&(e.enterHandler(),!0)},onFilter:function(e,t){return t?new l.a(e,{threshold:.2,keys:["name"]}).search(t):e}})]})},beforeDestroy:function(){this.editor&&this.editor.destroy()},watch:{value:function(e){this.emitAfterOnUpdate?this.emitAfterOnUpdate=!1:this.editor&&this.editor.setContent(e)}},computed:{hasResults:function(){return this.filteredUsers.length},showSuggestions:function(){return this.query||this.hasResults}},methods:{upHandler:function(){this.navigatedUserIndex=(this.navigatedUserIndex+this.filteredUsers.length-1)%this.filteredUsers.length},downHandler:function(){this.navigatedUserIndex=(this.navigatedUserIndex+1)%this.filteredUsers.length},enterHandler:function(){var e=this.filteredUsers[this.navigatedUserIndex];e&&this.selectUser(e)},selectUser:function(e){this.insertMention({range:this.suggestionRange,attrs:{id:e.id,label:e.name}}),this.editor.focus()},renderPopup:function(e){var t=this;this.popup||(console.log("nodeis",e),this.popup=Object(d.a)(e,{content:this.$refs.suggestions,trigger:"mouseenter",interactive:!0,theme:"dark",placement:"top-start",inertia:!0,duration:[400,200],showOnInit:!0,arrow:!0,arrowType:"round"}),MutationObserver&&(this.observer=new MutationObserver((function(){t.popup.popperInstance.scheduleUpdate()})),this.observer.observe(this.$refs.suggestions,{childList:!0,subtree:!0,characterData:!0})))},destroyPopup:function(){this.popup&&(this.popup.destroy(),this.popup=null),this.observer&&this.observer.disconnect()}}},m=(n(290),n(18)),O=Object(m.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("editor-content",{attrs:{editor:e.editor,autoFocus:e.editorAutofocus}}),e._v(" "),n("client-only",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showSuggestions,expression:"showSuggestions"}],ref:"suggestions",staticClass:"suggestion-list"},[e.hasResults?e._l(e.filteredUsers,(function(t,r){return n("div",{key:t.id,staticClass:"suggestion-list__item",class:{"is-selected":e.navigatedUserIndex===r},on:{click:function(n){return e.selectUser(t)}}},[e._v("\n          "+e._s(t.name)+"\n        ")])})):n("div",{staticClass:"suggestion-list__item is-empty"},[e._v("No users found")])],2)])],1)}),[],!1,null,null,null).exports;function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var j={name:"Editor",props:{page:{type:Object,required:!0}},components:{TiptapEditor:O},methods:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.d)(["EDIT_PAGE"])),computed:{title:{set:function(title){this.EDIT_PAGE({id:this.page.id,title:title})},get:function(){return this.page.title}},content:{set:function(content){this.EDIT_PAGE({id:this.page.id,content:content})},get:function(){return this.page.content}}}},w=Object(m.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-input",{staticStyle:{"font-size":"2rem",outline:"none"},attrs:{autofocus:!e.title.length,placeholder:"title"},model:{value:e.title,callback:function(t){e.title="string"==typeof t?t.trim():t},expression:"title"}}),e._v(" "),n("TiptapEditor",{staticClass:"mt-3",attrs:{editorAutofocus:e.title.length&&!e.content.length},model:{value:e.content,callback:function(t){e.content="string"==typeof t?t.trim():t},expression:"content"}})],1)}),[],!1,null,"082da68d",null);t.a=w.exports},326:function(e,t,n){"use strict";n(6),n(4),n(2),n(1),n(5);var r=n(0),o=n(48);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var l={name:"FavoriteButton",props:{page:Object},methods:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.b)(["removePage"]))},d=n(18),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(t){return e.removePage(e.page)}}},[e._v("Remove")])}),[],!1,null,"74f5d1b0",null);t.a=component.exports},327:function(e,t,n){"use strict";n(6),n(4),n(2),n(1),n(5);var r=n(0),o=n(48);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var l={name:"FavoriteButton",props:{page:Object},methods:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.d)(["TOGGLE_FAVORITE"]))},d=n(18),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("b-button",{attrs:{size:"sm",variant:e.page.favorite?"secondary":"primary"},on:{click:function(t){return e.TOGGLE_FAVORITE(e.page.id)}}},[e._v(e._s(e.page.favorite?"Unfavorite":"Favorite"))])}),[],!1,null,"8397cb74",null);t.a=component.exports},616:function(e,t,n){"use strict";n.r(t);n(6),n(4),n(2),n(1),n(5);var r=n(0),o=(n(88),n(89),n(107)),c=n(326),l=n(327),d=n(325),f=(n(10),{name:"TextWithLinks",props:{text:String},computed:{textWithLinks:function(){return this.text.replace(/(?<=\[\[).*?(?=\]\])/g,(function(e){return"<a href=\"\" onclick=\"$nuxt.$store.dispatch('gotoPage', '".concat(e,"'); return false\">").concat(e,"</a>")}))}}}),h=n(18),v=Object(h.a)(f,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{domProps:{innerHTML:this._s(this.textWithLinks)}})])}),[],!1,null,"0ec8094c",null).exports,m=(n(66),n(48));function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var y={name:"PageReferences",props:{page:Object},methods:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(m.b)(["gotoPage","convertMentionToLink"]),{convertAllMentions:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.page.inboundMentions[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var c=r.value;this.convertMentionToLink({mention:this.page.title,title:c.title})}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}}),computed:{formatHTML:function(html){return h2p(html).substring(0,100)}}},j=Object(h.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",[e._v("references")]),e._v(" "),n("h5",[e._v(e._s(e.page.inboundLinks.length)+" links")]),e._v(" "),e._l(e.page.inboundLinks,(function(link){return n("div",{key:e.page.title+link.title},[n("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.gotoPage(link.title)}}},[e._v(e._s(link.title))]),e._v(" "),n("small",[e._v(e._s(link.content))])])})),e._v(" "),e.page.inboundMentions.length?n("b-button",{on:{click:e.convertAllMentions}},[e._v("convert all")]):e._e(),e._v(" "),n("h5",[e._v(e._s(e.page.inboundMentions.length)+" mentions")]),e._v(" "),e._l(e.page.inboundMentions,(function(t){return n("div",{key:e.page.title+t.title},[n("b-button",{on:{click:function(n){return e.convertMentionToLink({mention:e.page.title,title:t.title})}}},[e._v("\n      convert\n      "),n("b",[e._v(e._s(t.title))]),e._v(" to link\n    ")]),e._v(" "),n("small",[e._v(e._s(t.content))])],1)}))],2)}),[],!1,null,"67ee11f2",null).exports;function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function _(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var P={validate:function(e){var t=e.params;return e.store.getters.pageIds.includes(t.id)},components:{AddPageButton:o.a,RemoveButton:c.a,FavoriteButton:l.a,Editor:d.a,TextWithLinks:v,PageReferences:j},methods:_({},Object(m.d)(["EDIT_PAGE"])),computed:_({},Object(m.c)(["getCurrentPage"]),{currentPage:function(){return this.getCurrentPage(this.$route.params.id)}})},k=Object(h.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"py-3"},[n("FavoriteButton",{attrs:{page:e.currentPage}}),e._v(" "),n("RemoveButton",{attrs:{page:e.currentPage}})],1),e._v(" "),n("Editor",{attrs:{page:e.currentPage}}),e._v(" "),n("h2",[n("TextWithLinks",{attrs:{text:e.currentPage.title}})],1),e._v(" "),n("TextWithLinks",{attrs:{text:e.currentPage.content}}),e._v(" "),n("PageReferences",{attrs:{page:e.currentPage}})],1)}),[],!1,null,"5df09f38",null);t.default=k.exports}}]);