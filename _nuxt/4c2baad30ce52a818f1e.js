(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{245:function(e,t,n){var content=n(291);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(39).default)("fe44b052",content,!0,{sourceMap:!1})},290:function(e,t,n){"use strict";var r=n(245);n.n(r).a},291:function(e,t,n){(t=n(38)(!1)).push([e.i,".mention{background:rgba(0,0,0,.1);font-size:.8rem;font-weight:700;border-radius:5px;padding:.2rem .5rem;white-space:nowrap}.mention,.mention-suggestion{color:rgba(0,0,0,.6)}.suggestion-list{padding:.2rem;border:2px solid rgba(0,0,0,.1);font-size:.8rem;font-weight:700}.suggestion-list__no-results{padding:.2rem .5rem}.suggestion-list__item{border-radius:5px;padding:.2rem .5rem;margin-bottom:.2rem;cursor:pointer}.suggestion-list__item:last-child{margin-bottom:0}.suggestion-list__item.is-selected,.suggestion-list__item:hover{background-color:hsla(0,0%,100%,.2)}.suggestion-list__item.is-empty{opacity:.5}.tippy-tooltip.dark-theme{background-color:#000;padding:0;font-size:1rem;text-align:inherit;color:#fff;border-radius:5px}.tippy-tooltip.dark-theme .tippy-backdrop{display:none}.tippy-tooltip.dark-theme .tippy-roundarrow{fill:#000}.tippy-popper[x-placement^=top] .tippy-tooltip.dark-theme .tippy-arrow{border-top-color:#000}.tippy-popper[x-placement^=bottom] .tippy-tooltip.dark-theme .tippy-arrow{border-bottom-color:#000}.tippy-popper[x-placement^=left] .tippy-tooltip.dark-theme .tippy-arrow{border-left-color:#000}.tippy-popper[x-placement^=right] .tippy-tooltip.dark-theme .tippy-arrow{border-right-color:#000}",""]),e.exports=t},325:function(e,t,n){"use strict";n(6),n(4),n(2),n(1),n(5);var r=n(0),o=n(48),c=(n(19),n(106),n(330)),l=n.n(c),d=n(331),f=n(328),h=n(397),m={name:"TiptapEditor",components:{EditorContent:f.b},props:["value","editorAutofocus"],data:function(){return{editor:null,emitAfterOnUpdate:!1,query:null,suggestionRange:null,filteredUsers:[],navigatedUserIndex:0,insertMention:function(){},observer:null}},mounted:function(){var e=this;this.editor=new f.a({onUpdate:function(t){var n=t.getHTML;e.emitAfterOnUpdate=!0,e.$emit("input",n())},content:this.value||"<ul><li></li></ul>",extensions:[new h.a,new h.e,new h.f,new h.g({levels:[1,2,3]}),new h.c,new h.m,new h.k,new h.o,new h.p,new h.b,new h.d,new h.i,new h.j,new h.n,new h.q,new h.h,new h.l({items:function(){return[{id:1,name:"Philipp KÃ¼hn"},{id:2,name:"Hans Pagel"},{id:3,name:"Kris Siepert"},{id:4,name:"Justin Schueler"}]},onEnter:function(t){var n=t.items,r=t.query,o=t.range,c=t.command,l=t.virtualNode;e.query=r,e.filteredUsers=n,e.suggestionRange=o,e.renderPopup(l),e.insertMention=c},onChange:function(t){var n=t.items,r=t.query,o=t.range,c=t.virtualNode;e.query=r,e.filteredUsers=n,e.suggestionRange=o,e.navigatedUserIndex=0,e.renderPopup(c)},onExit:function(){e.query=null,e.filteredUsers=[],e.suggestionRange=null,e.navigatedUserIndex=0,e.destroyPopup()},onKeyDown:function(t){var n=t.event;return 38===n.keyCode?(e.upHandler(),!0):40===n.keyCode?(e.downHandler(),!0):13===n.keyCode&&(e.enterHandler(),!0)},onFilter:function(e,t){return t?new l.a(e,{threshold:.2,keys:["name"]}).search(t):e}})]})},beforeDestroy:function(){this.editor&&this.editor.destroy()},watch:{value:function(e){this.emitAfterOnUpdate?this.emitAfterOnUpdate=!1:this.editor&&this.editor.setContent(e)}},computed:{hasResults:function(){return this.filteredUsers.length},showSuggestions:function(){return this.query||this.hasResults}},methods:{upHandler:function(){this.navigatedUserIndex=(this.navigatedUserIndex+this.filteredUsers.length-1)%this.filteredUsers.length},downHandler:function(){this.navigatedUserIndex=(this.navigatedUserIndex+1)%this.filteredUsers.length},enterHandler:function(){var e=this.filteredUsers[this.navigatedUserIndex];e&&this.selectUser(e)},selectUser:function(e){this.insertMention({range:this.suggestionRange,attrs:{id:e.id,label:e.name}}),this.editor.focus()},renderPopup:function(e){var t=this;this.popup||(console.log("nodeis",e),this.popup=Object(d.a)(e,{content:this.$refs.suggestions,trigger:"mouseenter",interactive:!0,theme:"dark",placement:"top-start",inertia:!0,duration:[400,200],showOnInit:!0,arrow:!0,arrowType:"round"}),MutationObserver&&(this.observer=new MutationObserver((function(){t.popup.popperInstance.scheduleUpdate()})),this.observer.observe(this.$refs.suggestions,{childList:!0,subtree:!0,characterData:!0})))},destroyPopup:function(){this.popup&&(this.popup.destroy(),this.popup=null),this.observer&&this.observer.disconnect()}}},y=(n(290),n(18)),v=Object(y.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("editor-content",{attrs:{editor:e.editor,autoFocus:e.editorAutofocus}}),e._v(" "),n("client-only",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showSuggestions,expression:"showSuggestions"}],ref:"suggestions",staticClass:"suggestion-list"},[e.hasResults?e._l(e.filteredUsers,(function(t,r){return n("div",{key:t.id,staticClass:"suggestion-list__item",class:{"is-selected":e.navigatedUserIndex===r},on:{click:function(n){return e.selectUser(t)}}},[e._v("\n          "+e._s(t.name)+"\n        ")])})):n("div",{staticClass:"suggestion-list__item is-empty"},[e._v("No users found")])],2)])],1)}),[],!1,null,null,null).exports;function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var O={name:"Editor",props:{page:{type:Object,required:!0}},components:{TiptapEditor:v},methods:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.d)(["EDIT_PAGE"])),computed:{title:{set:function(title){this.EDIT_PAGE({id:this.page.id,title:title})},get:function(){return this.page.title}},content:{set:function(content){this.EDIT_PAGE({id:this.page.id,content:content})},get:function(){return this.page.content}}}},j=Object(y.a)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-input",{staticStyle:{"font-size":"2rem",outline:"none"},attrs:{autofocus:!e.title.length,placeholder:"title"},model:{value:e.title,callback:function(t){e.title="string"==typeof t?t.trim():t},expression:"title"}}),e._v(" "),n("TiptapEditor",{staticClass:"mt-3",attrs:{editorAutofocus:e.title.length&&!e.content.length},model:{value:e.content,callback:function(t){e.content="string"==typeof t?t.trim():t},expression:"content"}})],1)}),[],!1,null,"082da68d",null);t.a=j.exports},618:function(e,t,n){"use strict";n.r(t);n(6),n(4),n(2),n(1),n(5);var r=n(0),o=n(325),c=n(48),l=n(236),d=n(234);function f(e){Object(d.a)(1,arguments);var t=Object(l.a)(e);return t.setHours(0,0,0,0),t}var h=n(615);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={components:{Editor:o.a},methods:y({},Object(c.b)(["addPage"])),computed:y({},Object(c.c)(["getDailyPages"])),created:function(){this.getDailyPages.length&&function(e,t){Object(d.a)(2,arguments);var n=f(e),r=f(t);return n.getTime()===r.getTime()}(this.getDailyPages[0].createTime,Date.now())||this.addPage({title:Object(h.a)(new Date,"MMM do, yyyy"),content:"",daily:!0})}},w=n(18),component=Object(w.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.getDailyPages,(function(t){return n("div",{key:t.id},[n("h1",[e._v(e._s(t.title))]),e._v(" "),n("Editor",{attrs:{page:t}})],1)})),0)}),[],!1,null,"7ea482bc",null);t.default=component.exports}}]);